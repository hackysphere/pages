---
import BaseLayout from "@layouts/BaseLayout.astro";
import RichPostLink from "@comps/RichPostLink.astro";
import { getCollection } from "astro:content";

const allPosts = (await getCollection("blog")).sort((post1, post2) => post2.data.pubDate.valueOf() - post1.data.pubDate.valueOf())
---
<BaseLayout title="blog">
    <h1>blog <a href="/blog/rss.xml">(rss)</a></h1>
    <!-- <a href="/blog/tags">go to tag lookup</a>
     TODO tags are still incomplete -->

    {allPosts.length == 0
    ? <p>...there's nothing here (yet!)</p>
    : allPosts.map((post) => <RichPostLink post={post} />)
    }
</BaseLayout>